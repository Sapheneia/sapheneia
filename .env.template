# Sapheneia API Configuration
# Copy this file to .env and configure with your values

# =============================================================================
# API Configuration
# =============================================================================

# API Security (REQUIRED - Change this!)
API_SECRET_KEY=your_secret_key_change_me_in_production

# API Server Settings
API_HOST=0.0.0.0
API_PORT=8000
LOG_LEVEL=INFO
ENVIRONMENT=development

# Worker Configuration (IMPORTANT: Keep at 1 for module-level state)
# Multiple workers require Redis state backend (not yet implemented)
UVICORN_WORKERS=1

# CORS Configuration
CORS_ALLOWED_ORIGINS=http://localhost:8080,http://localhost:3000
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_INFERENCE_PER_MINUTE=10
RATE_LIMIT_STORAGE_URI=memory://

# Service ports
METRICS_API_PORT=8001

# Model-specific ports (for running multiple models simultaneously)
# NOTE: If metrics-api is running on 8001, use 8002+ for model services
TIMESFM20_MODEL_PORT=8002
TIMESFM25_MODEL_PORT=8003
FLOWSTATE91M_MODEL_PORT=8004

# =============================================================================
# TimesFM-2.0 Model Defaults
# =============================================================================

# Default model configuration for TimesFM-2.0
TIMESFM20_DEFAULT_BACKEND=cpu
TIMESFM20_DEFAULT_CONTEXT_LEN=64
TIMESFM20_DEFAULT_HORIZON_LEN=24
TIMESFM20_DEFAULT_CHECKPOINT=google/timesfm-2.0-500m-pytorch

# Local model path (optional)
# TIMESFM20_DEFAULT_LOCAL_PATH=model.ckpt

# =============================================================================
# MLOps Integration (Optional - for Aleutian Local)
# =============================================================================

# MLflow Tracking
MLFLOW_TRACKING_URI=http://localhost:5000

# Celery Task Queue (for async operations)
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# MLflow Model Registry (optional)
# TIMESFM20_DEFAULT_MLFLOW_NAME=timesfm20-production
# TIMESFM20_DEFAULT_MLFLOW_STAGE=Production

# =============================================================================
# Metrics API Configuration
# =============================================================================

METRICS_API_HOST=0.0.0.0
METRICS_API_LOG_LEVEL=INFO

# =============================================================================
# UI Configuration (for Flask UI)
# =============================================================================

# UI should connect to these APIs
UI_API_BASE_URL=http://localhost:8000
UI_METRICS_API_BASE_URL=http://localhost:8001
UI_PORT=8080

# =============================================================================
# Development Settings
# =============================================================================

# Set to 'development' to enable debug features
FLASK_ENV=production

# Python path (automatically set by setup.sh)
# PYTHONPATH=/path/to/sapheneia
